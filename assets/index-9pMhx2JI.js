import{i as de,g as ce,a as ge,R as ue,b as he}from"./index-DsiGS0qh.js";import{r,p as D,q as F,t as me,v as pe,w as g,x as $e,y as Ce,z as W,A as j,E as ve,G as be}from"./index-CRAzO0-O.js";import{G as Se,B as L}from"./index-DBF6Askz.js";const fe=10,ye=20;function Me(e){const{fullscreen:t,validRange:a,generateConfig:l,locale:d,prefixCls:o,value:h,onChange:m,divRef:b}=e,p=l.getYear(h||l.getNow());let c=p-fe,$=c+ye;a&&(c=l.getYear(a[0]),$=l.getYear(a[1])+1);const S=d&&d.year==="年"?"年":"",y=[];for(let i=c;i<$;i++)y.push({label:`${i}${S}`,value:i});return r.createElement(F,{size:t?void 0:"small",options:y,value:p,className:`${o}-year-select`,onChange:i=>{let C=l.setYear(h,i);if(a){const[v,R]=a,M=l.getYear(C),E=l.getMonth(C);M===l.getYear(R)&&E>l.getMonth(R)&&(C=l.setMonth(C,l.getMonth(R))),M===l.getYear(v)&&E<l.getMonth(v)&&(C=l.setMonth(C,l.getMonth(v)))}m(C)},getPopupContainer:()=>b.current})}function we(e){const{prefixCls:t,fullscreen:a,validRange:l,value:d,generateConfig:o,locale:h,onChange:m,divRef:b}=e,p=o.getMonth(d||o.getNow());let c=0,$=11;if(l){const[i,C]=l,v=o.getYear(d);o.getYear(C)===v&&($=o.getMonth(C)),o.getYear(i)===v&&(c=o.getMonth(i))}const S=h.shortMonths||o.locale.getShortMonths(h.locale),y=[];for(let i=c;i<=$;i+=1)y.push({label:S[i],value:i});return r.createElement(F,{size:a?void 0:"small",className:`${t}-month-select`,value:p,options:y,onChange:i=>{m(o.setMonth(d,i))},getPopupContainer:()=>b.current})}function Ee(e){const{prefixCls:t,locale:a,mode:l,fullscreen:d,onModeChange:o}=e;return r.createElement(Se,{onChange:h=>{let{target:{value:m}}=h;o(m)},value:l,size:d?void 0:"small",className:`${t}-mode-switch`},r.createElement(L,{value:"month"},a.month),r.createElement(L,{value:"year"},a.year))}function Re(e){const{prefixCls:t,fullscreen:a,mode:l,onChange:d,onModeChange:o}=e,h=r.useRef(null),m=r.useContext(D),b=r.useMemo(()=>Object.assign(Object.assign({},m),{isFormItemInput:!1}),[m]),p=Object.assign(Object.assign({},e),{fullscreen:a,divRef:h});return r.createElement("div",{className:`${t}-header`,ref:h},r.createElement(D.Provider,{value:b},r.createElement(Me,Object.assign({},p,{onChange:c=>{d(c,"year")}})),l==="month"&&r.createElement(we,Object.assign({},p,{onChange:c=>{d(c,"month")}}))),r.createElement(Ee,Object.assign({},p,{onModeChange:o})))}const xe=e=>{const{calendarCls:t,componentCls:a,fullBg:l,fullPanelBg:d,itemActiveBg:o}=e;return{[t]:Object.assign(Object.assign(Object.assign({},ce(e)),$e(e)),{background:l,"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",justifyContent:"flex-end",padding:`${g(e.paddingSM)} 0`,[`${t}-year-select`]:{minWidth:e.yearControlWidth},[`${t}-month-select`]:{minWidth:e.monthControlWidth,marginInlineStart:e.marginXS},[`${t}-mode-switch`]:{marginInlineStart:e.marginXS}}}),[`${t} ${a}-panel`]:{background:d,border:0,borderTop:`${g(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,[`${a}-month-panel, ${a}-date-panel`]:{width:"auto"},[`${a}-body`]:{padding:`${g(e.paddingXS)} 0`},[`${a}-content`]:{width:"100%"}},[`${t}-mini`]:{borderRadius:e.borderRadiusLG,[`${t}-header`]:{paddingInlineEnd:e.paddingXS,paddingInlineStart:e.paddingXS},[`${a}-panel`]:{borderRadius:`0 0 ${g(e.borderRadiusLG)} ${g(e.borderRadiusLG)}`},[`${a}-content`]:{height:e.miniContentHeight,th:{height:"auto",padding:0,lineHeight:g(e.weekHeight)}},[`${a}-cell::before`]:{pointerEvents:"none"}},[`${t}${t}-full`]:{[`${a}-panel`]:{display:"block",width:"100%",textAlign:"end",background:l,border:0,[`${a}-body`]:{"th, td":{padding:0},th:{height:"auto",paddingInlineEnd:e.paddingSM,paddingBottom:e.paddingXXS,lineHeight:g(e.weekHeight)}}},[`${a}-cell-week ${a}-cell-inner`]:{display:"block",borderRadius:0,borderTop:`${g(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,width:"100%",height:e.calc(e.dateValueHeight).add(e.dateContentHeight).add(e.calc(e.paddingXS).div(2)).add(e.lineWidthBold).equal()},[`${a}-cell`]:{"&::before":{display:"none"},"&:hover":{[`${t}-date`]:{background:e.controlItemBgHover}},[`${t}-date-today::before`]:{display:"none"},[`&-in-view${a}-cell-selected`]:{[`${t}-date, ${t}-date-today`]:{background:o}},"&-selected, &-selected:hover":{[`${t}-date, ${t}-date-today`]:{[`${t}-date-value`]:{color:e.colorPrimary}}}},[`${t}-date`]:{display:"block",width:"auto",height:"auto",margin:`0 ${g(e.calc(e.marginXS).div(2).equal())}`,padding:`${g(e.calc(e.paddingXS).div(2).equal())} ${g(e.paddingXS)} 0`,border:0,borderTop:`${g(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,transition:`background ${e.motionDurationSlow}`,"&-value":{lineHeight:g(e.dateValueHeight),transition:`color ${e.motionDurationSlow}`},"&-content":{position:"static",width:"auto",height:e.dateContentHeight,overflowY:"auto",color:e.colorText,lineHeight:e.lineHeight,textAlign:"start"},"&-today":{borderColor:e.colorPrimary,[`${t}-date-value`]:{color:e.colorText}}}},[`@media only screen and (max-width: ${g(e.screenXS)}) `]:{[t]:{[`${t}-header`]:{display:"block",[`${t}-year-select`]:{width:"50%"},[`${t}-month-select`]:{width:`calc(50% - ${g(e.paddingXS)})`},[`${t}-mode-switch`]:{width:"100%",marginTop:e.marginXS,marginInlineStart:0,"> label":{width:"50%",textAlign:"center"}}}}}}},He=e=>Object.assign({fullBg:e.colorBgContainer,fullPanelBg:e.colorBgContainer,itemActiveBg:e.controlItemBgActive,yearControlWidth:80,monthControlWidth:70,miniContentHeight:256},ge(e)),Ie=me("Calendar",e=>{const t=`${e.componentCls}-calendar`,a=pe(e,de(e),{calendarCls:t,pickerCellInnerCls:`${e.componentCls}-cell-inner`,dateValueHeight:e.controlHeightSM,weekHeight:e.calc(e.controlHeightSM).mul(.75).equal(),dateContentHeight:e.calc(e.calc(e.fontHeightSM).add(e.marginXS)).mul(3).add(e.calc(e.lineWidth).mul(2)).equal()});return[xe(a)]},He),q=(e,t,a)=>{const{getYear:l}=a;return e&&t&&l(e)===l(t)},Y=(e,t,a)=>{const{getMonth:l}=a;return q(e,t,a)&&l(e)===l(t)},V=(e,t,a)=>{const{getDate:l}=a;return Y(e,t,a)&&l(e)===l(t)},z=e=>a=>{const{prefixCls:l,className:d,rootClassName:o,style:h,dateFullCellRender:m,dateCellRender:b,monthFullCellRender:p,monthCellRender:c,cellRender:$,fullCellRender:S,headerRender:y,value:i,defaultValue:C,disabledDate:v,mode:R,validRange:M,fullscreen:E=!0,showWeek:G,onChange:N,onPanelChange:O,onSelect:P}=a,{getPrefixCls:_,direction:J,className:K,style:Q}=Ce("calendar"),x=_("picker",l),u=`${x}-calendar`,[U,Z,k]=Ie(x,u),B=e.getNow(),[w,ee]=W(()=>i||e.getNow(),{defaultValue:C,value:i}),[H,te]=W("month",{value:R}),I=r.useMemo(()=>H==="year"?"month":"date",[H]),ae=r.useCallback(n=>(M?e.isAfter(M[0],n)||e.isAfter(n,M[1]):!1)||!!(v!=null&&v(n)),[v,M]),X=(n,s)=>{O==null||O(n,s)},ne=n=>{ee(n),V(n,w,e)||((I==="date"&&!Y(n,w,e)||I==="month"&&!q(n,w,e))&&X(n,H),N==null||N(n))},A=n=>{te(n),X(w,n)},T=(n,s)=>{ne(n),P==null||P(n,{source:s})},le=r.useCallback((n,s)=>S?S(n,s):m?m(n):r.createElement("div",{className:j(`${x}-cell-inner`,`${u}-date`,{[`${u}-date-today`]:V(B,n,e)})},r.createElement("div",{className:`${u}-date-value`},String(e.getDate(n)).padStart(2,"0")),r.createElement("div",{className:`${u}-date-content`},$?$(n,s):b==null?void 0:b(n))),[m,b,$,S]),re=r.useCallback((n,s)=>{if(S)return S(n,s);if(p)return p(n);const se=s.locale.shortMonths||e.locale.getShortMonths(s.locale.locale);return r.createElement("div",{className:j(`${x}-cell-inner`,`${u}-date`,{[`${u}-date-today`]:Y(B,n,e)})},r.createElement("div",{className:`${u}-date-value`},se[e.getMonth(n)]),r.createElement("div",{className:`${u}-date-content`},$?$(n,s):c==null?void 0:c(n)))},[p,c,$,S]),[oe]=ve("Calendar",be),f=Object.assign(Object.assign({},oe),a.locale),ie=(n,s)=>{if(s.type==="date")return le(n,s);if(s.type==="month")return re(n,Object.assign(Object.assign({},s),{locale:f==null?void 0:f.lang}))};return U(r.createElement("div",{className:j(u,{[`${u}-full`]:E,[`${u}-mini`]:!E,[`${u}-rtl`]:J==="rtl"},K,d,o,Z,k),style:Object.assign(Object.assign({},Q),h)},y?y({value:w,type:H,onChange:n=>{T(n,"customize")},onTypeChange:A}):r.createElement(Re,{prefixCls:u,value:w,generateConfig:e,mode:H,fullscreen:E,locale:f==null?void 0:f.lang,validRange:M,onChange:T,onModeChange:A}),r.createElement(ue,{value:w,prefixCls:x,locale:f==null?void 0:f.lang,generateConfig:e,cellRender:ie,onSelect:n=>{T(n,I)},mode:I,picker:I,disabledDate:ae,hideHeader:!0,showWeek:G})))},Ne=z(he);Ne.generateCalendar=z;export{Ne as C};
