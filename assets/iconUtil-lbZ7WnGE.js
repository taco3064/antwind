import{$ as ze,a as j,Y as re,O as vt,a0 as ue,X as gt,U as Ie,r as C,I as Ae,_ as z,A as W,T as K,P as T,Q as ae,Z as dt,ac as Me,W as ht,c7 as yt,as as pt,c8 as mt,au as bt,c9 as w,V as xe,at as Kt,v as xt,x as Ct,w as Ue,a8 as Nt,aQ as kt,t as Et,a1 as St,aA as Dt,a5 as Ye}from"./index-DERcz0tS.js";import{g as wt}from"./index-BjnIb6lG.js";function q(n,t){return n[t]}var $t=["children"];function lt(n,t){return"".concat(n,"-").concat(t)}function Ot(n){return n&&n.type&&n.type.isTreeNode}function Oe(n,t){return n??t}function Re(n){var t=n||{},o=t.title,e=t._title,i=t.key,s=t.children,y=o||"title";return{title:y,_title:e||[y],key:i||"key",children:s||"children"}}function Pt(n){function t(o){var e=gt(o);return e.map(function(i){if(!Ot(i))return re(!i,"Tree/TreeNode can only accept TreeNode as children."),null;var s=i.key,y=i.props,a=y.children,d=Ie(y,$t),r=j({key:s},d),c=t(a);return c.length&&(r.children=c),r}).filter(function(i){return i})}return t(n)}function Fe(n,t,o){var e=Re(o),i=e._title,s=e.key,y=e.children,a=new Set(t===!0?[]:t),d=[];function r(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return c.map(function(v,g){for(var h=lt(u?u.pos:"0",g),b=Oe(v[s],h),f,p=0;p<i.length;p+=1){var x=i[p];if(v[x]!==void 0){f=v[x];break}}var m=Object.assign(vt(v,[].concat(ue(i),[s,y])),{title:f,key:b,parent:u,pos:h,children:null,data:v,isStart:[].concat(ue(u?u.isStart:[]),[g===0]),isEnd:[].concat(ue(u?u.isEnd:[]),[g===c.length-1])});return d.push(m),t===!0||a.has(b)?m.children=r(v[y]||[],m):m.children=[],m})}return r(n),d}function Tt(n,t,o){var e={};ze(o)==="object"?e=o:e={externalGetKey:o},e=e||{};var i=e,s=i.childrenPropName,y=i.externalGetKey,a=i.fieldNames,d=Re(a),r=d.key,c=d.children,u=s||c,v;y?typeof y=="string"?v=function(b){return b[y]}:typeof y=="function"&&(v=function(b){return y(b)}):v=function(b,f){return Oe(b[r],f)};function g(h,b,f,p){var x=h?h[u]:n,m=h?lt(f.pos,b):"0",E=h?[].concat(ue(p),[h]):[];if(h){var N=v(h,m),S={node:h,index:b,pos:m,key:N,parentPos:f.node?f.pos:null,level:f.level+1,nodes:E};t(S)}x&&x.forEach(function(D,$){g(D,$,{node:h,pos:m,level:f?f.level+1:-1},E)})}g(null)}function Mt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.initWrapper,e=t.processEntity,i=t.onProcessFinished,s=t.externalGetKey,y=t.childrenPropName,a=t.fieldNames,d=arguments.length>2?arguments[2]:void 0,r=s||d,c={},u={},v={posEntities:c,keyEntities:u};return o&&(v=o(v)||v),Tt(n,function(g){var h=g.node,b=g.index,f=g.pos,p=g.key,x=g.parentPos,m=g.level,E=g.nodes,N={node:h,nodes:E,index:b,key:p,pos:f,level:m},S=Oe(p,f);c[f]=N,u[S]=N,N.parent=c[x],N.parent&&(N.parent.children=N.parent.children||[],N.parent.children.push(N)),e&&e(N,v)},{externalGetKey:r,childrenPropName:y,fieldNames:a}),i&&i(v),v}function $e(n,t){var o=t.expandedKeys,e=t.selectedKeys,i=t.loadedKeys,s=t.loadingKeys,y=t.checkedKeys,a=t.halfCheckedKeys,d=t.dragOverNodeKey,r=t.dropPosition,c=t.keyEntities,u=q(c,n),v={eventKey:n,expanded:o.indexOf(n)!==-1,selected:e.indexOf(n)!==-1,loaded:i.indexOf(n)!==-1,loading:s.indexOf(n)!==-1,checked:y.indexOf(n)!==-1,halfChecked:a.indexOf(n)!==-1,pos:String(u?u.pos:""),dragOver:d===n&&r===0,dragOverGapTop:d===n&&r===-1,dragOverGapBottom:d===n&&r===1};return v}function H(n){var t=n.data,o=n.expanded,e=n.selected,i=n.checked,s=n.loaded,y=n.loading,a=n.halfChecked,d=n.dragOver,r=n.dragOverGapTop,c=n.dragOverGapBottom,u=n.pos,v=n.active,g=n.eventKey,h=j(j({},t),{},{expanded:o,selected:e,checked:i,loaded:s,loading:y,halfChecked:a,dragOver:d,dragOverGapTop:r,dragOverGapBottom:c,pos:u,active:v,key:g});return"props"in h||Object.defineProperty(h,"props",{get:function(){return re(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n}}),h}function st(n,t){var o=new Set;return n.forEach(function(e){t.has(e)||o.add(e)}),o}function Rt(n){var t=n||{},o=t.disabled,e=t.disableCheckbox,i=t.checkable;return!!(o||e)||i===!1}function Lt(n,t,o,e){for(var i=new Set(n),s=new Set,y=0;y<=o;y+=1){var a=t.get(y)||new Set;a.forEach(function(u){var v=u.key,g=u.node,h=u.children,b=h===void 0?[]:h;i.has(v)&&!e(g)&&b.filter(function(f){return!e(f.node)}).forEach(function(f){i.add(f.key)})})}for(var d=new Set,r=o;r>=0;r-=1){var c=t.get(r)||new Set;c.forEach(function(u){var v=u.parent,g=u.node;if(!(e(g)||!u.parent||d.has(u.parent.key))){if(e(u.parent.node)){d.add(v.key);return}var h=!0,b=!1;(v.children||[]).filter(function(f){return!e(f.node)}).forEach(function(f){var p=f.key,x=i.has(p);h&&!x&&(h=!1),!b&&(x||s.has(p))&&(b=!0)}),h&&i.add(v.key),b&&s.add(v.key),d.add(v.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(st(s,i))}}function It(n,t,o,e,i){for(var s=new Set(n),y=new Set(t),a=0;a<=e;a+=1){var d=o.get(a)||new Set;d.forEach(function(v){var g=v.key,h=v.node,b=v.children,f=b===void 0?[]:b;!s.has(g)&&!y.has(g)&&!i(h)&&f.filter(function(p){return!i(p.node)}).forEach(function(p){s.delete(p.key)})})}y=new Set;for(var r=new Set,c=e;c>=0;c-=1){var u=o.get(c)||new Set;u.forEach(function(v){var g=v.parent,h=v.node;if(!(i(h)||!v.parent||r.has(v.parent.key))){if(i(v.parent.node)){r.add(g.key);return}var b=!0,f=!1;(g.children||[]).filter(function(p){return!i(p.node)}).forEach(function(p){var x=p.key,m=s.has(x);b&&!m&&(b=!1),!f&&(m||y.has(x))&&(f=!0)}),b||s.delete(g.key),f&&y.add(g.key),r.add(g.key)}})}return{checkedKeys:Array.from(s),halfCheckedKeys:Array.from(st(y,s))}}function je(n,t,o,e){var i=[],s;e?s=e:s=Rt;var y=new Set(n.filter(function(c){var u=!!q(o,c);return u||i.push(c),u})),a=new Map,d=0;Object.keys(o).forEach(function(c){var u=o[c],v=u.level,g=a.get(v);g||(g=new Set,a.set(v,g)),g.add(u),d=Math.max(d,v)}),re(!i.length,"Tree missing follow keys: ".concat(i.slice(0,100).map(function(c){return"'".concat(c,"'")}).join(", ")));var r;return t===!0?r=Lt(y,a,d,s):r=It(y,t.halfCheckedKeys,a,d,s),r}var At={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},_t=function(t,o){return C.createElement(Ae,z({},t,{ref:o,icon:At}))},Bt=C.forwardRef(_t),Ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},Ft=function(t,o){return C.createElement(Ae,z({},t,{ref:o,icon:Ht}))},jt=C.forwardRef(Ft),qt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},Ut=function(t,o){return C.createElement(Ae,z({},t,{ref:o,icon:qt}))},Wt=C.forwardRef(Ut),zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Gt=function(t,o){return C.createElement(Ae,z({},t,{ref:o,icon:zt}))},Vt=C.forwardRef(Gt),Ge=C.createContext(null),Xt=C.createContext({}),Yt=function(t){for(var o=t.prefixCls,e=t.level,i=t.isStart,s=t.isEnd,y="".concat(o,"-indent-unit"),a=[],d=0;d<e;d+=1)a.push(C.createElement("span",{key:d,className:W(y,K(K({},"".concat(y,"-start"),i[d]),"".concat(y,"-end"),s[d]))}));return C.createElement("span",{"aria-hidden":"true",className:"".concat(o,"-indent")},a)};const Qt=C.memo(Yt);var Zt=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Qe="open",Ze="close",Jt="---",Le=function(t){var o,e,i,s=t.eventKey,y=t.className,a=t.style,d=t.dragOver,r=t.dragOverGapTop,c=t.dragOverGapBottom,u=t.isLeaf,v=t.isStart,g=t.isEnd,h=t.expanded,b=t.selected,f=t.checked,p=t.halfChecked,x=t.loading,m=t.domRef,E=t.active,N=t.data,S=t.onMouseMove,D=t.selectable,$=Ie(t,Zt),l=T.useContext(Ge),O=T.useContext(Xt),M=T.useRef(null),I=T.useState(!1),_=ae(I,2),L=_[0],B=_[1],A=!!(l.disabled||t.disabled||(o=O.nodeDisabled)!==null&&o!==void 0&&o.call(O,N)),F=T.useMemo(function(){return!l.checkable||t.checkable===!1?!1:l.checkable},[l.checkable,t.checkable]),ve=function(k){A||l.onNodeSelect(k,H(t))},ge=function(k){A||!F||t.disableCheckbox||l.onNodeCheck(k,H(t),!f)},Ce=T.useMemo(function(){return typeof D=="boolean"?D:l.selectable},[D,l.selectable]),he=function(k){l.onNodeClick(k,H(t)),Ce?ve(k):ge(k)},oe=function(k){l.onNodeDoubleClick(k,H(t))},G=function(k){l.onNodeMouseEnter(k,H(t))},ie=function(k){l.onNodeMouseLeave(k,H(t))},ye=function(k){l.onNodeContextMenu(k,H(t))},U=T.useMemo(function(){return!!(l.draggable&&(!l.draggable.nodeDraggable||l.draggable.nodeDraggable(N)))},[l.draggable,N]),Ne=function(k){k.stopPropagation(),B(!0),l.onNodeDragStart(k,t);try{k.dataTransfer.setData("text/plain","")}catch{}},Z=function(k){k.preventDefault(),k.stopPropagation(),l.onNodeDragEnter(k,t)},ke=function(k){k.preventDefault(),k.stopPropagation(),l.onNodeDragOver(k,t)},pe=function(k){k.stopPropagation(),l.onNodeDragLeave(k,t)},J=function(k){k.stopPropagation(),B(!1),l.onNodeDragEnd(k,t)},de=function(k){k.preventDefault(),k.stopPropagation(),B(!1),l.onNodeDrop(k,t)},_e=function(k){x||l.onNodeExpand(k,H(t))},me=T.useMemo(function(){var P=q(l.keyEntities,s)||{},k=P.children;return!!(k||[]).length},[l.keyEntities,s]),ee=T.useMemo(function(){return u===!1?!1:u||!l.loadData&&!me||l.loadData&&t.loaded&&!me},[u,l.loadData,me,t.loaded]);T.useEffect(function(){x||typeof l.loadData=="function"&&h&&!ee&&!t.loaded&&l.onNodeLoad(H(t))},[x,l.loadData,l.onNodeLoad,h,ee,t]);var Ee=T.useMemo(function(){var P;return(P=l.draggable)!==null&&P!==void 0&&P.icon?T.createElement("span",{className:"".concat(l.prefixCls,"-draggable-icon")},l.draggable.icon):null},[l.draggable]),Se=function(k){var X=t.switcherIcon||l.switcherIcon;return typeof X=="function"?X(j(j({},t),{},{isLeaf:k})):X},De=function(){if(ee){var k=Se(!0);return k!==!1?T.createElement("span",{className:W("".concat(l.prefixCls,"-switcher"),"".concat(l.prefixCls,"-switcher-noop"))},k):null}var X=Se(!1);return X!==!1?T.createElement("span",{onClick:_e,className:W("".concat(l.prefixCls,"-switcher"),"".concat(l.prefixCls,"-switcher_").concat(h?Qe:Ze))},X):null},Be=T.useMemo(function(){if(!F)return null;var P=typeof F!="boolean"?F:null;return T.createElement("span",{className:W("".concat(l.prefixCls,"-checkbox"),K(K(K({},"".concat(l.prefixCls,"-checkbox-checked"),f),"".concat(l.prefixCls,"-checkbox-indeterminate"),!f&&p),"".concat(l.prefixCls,"-checkbox-disabled"),A||t.disableCheckbox)),onClick:ge,role:"checkbox","aria-checked":p?"mixed":f,"aria-disabled":A||t.disableCheckbox,"aria-label":"Select ".concat(typeof t.title=="string"?t.title:"tree node")},P)},[F,f,p,A,t.disableCheckbox,t.title]),le=T.useMemo(function(){return ee?null:h?Qe:Ze},[ee,h]),R=T.useMemo(function(){return T.createElement("span",{className:W("".concat(l.prefixCls,"-iconEle"),"".concat(l.prefixCls,"-icon__").concat(le||"docu"),K({},"".concat(l.prefixCls,"-icon_loading"),x))})},[l.prefixCls,le,x]),V=T.useMemo(function(){var P=!!l.draggable,k=!t.disabled&&P&&l.dragOverNodeKey===s;return k?l.dropIndicatorRender({dropPosition:l.dropPosition,dropLevelOffset:l.dropLevelOffset,indent:l.indent,prefixCls:l.prefixCls,direction:l.direction}):null},[l.dropPosition,l.dropLevelOffset,l.indent,l.prefixCls,l.direction,l.draggable,l.dragOverNodeKey,l.dropIndicatorRender]),Y=T.useMemo(function(){var P=t.title,k=P===void 0?Jt:P,X="".concat(l.prefixCls,"-node-content-wrapper"),He;if(l.showIcon){var Pe=t.icon||l.icon;He=Pe?T.createElement("span",{className:W("".concat(l.prefixCls,"-iconEle"),"".concat(l.prefixCls,"-icon__customize"))},typeof Pe=="function"?Pe(t):Pe):R}else l.loadData&&x&&(He=R);var Te;return typeof k=="function"?Te=k(N):l.titleRender?Te=l.titleRender(N):Te=k,T.createElement("span",{ref:M,title:typeof k=="string"?k:"",className:W(X,"".concat(X,"-").concat(le||"normal"),K({},"".concat(l.prefixCls,"-node-selected"),!A&&(b||L))),onMouseEnter:G,onMouseLeave:ie,onContextMenu:ye,onClick:he,onDoubleClick:oe},He,T.createElement("span",{className:"".concat(l.prefixCls,"-title")},Te),V)},[l.prefixCls,l.showIcon,t,l.icon,R,l.titleRender,N,le,G,ie,ye,he,oe]),be=dt($,{aria:!0,data:!0}),se=q(l.keyEntities,s)||{},we=se.level,Ke=g[g.length-1],te=!A&&U,ce=l.draggingNodeKey===s,Xe=D!==void 0?{"aria-selected":!!D}:void 0;return T.createElement("div",z({ref:m,role:"treeitem","aria-expanded":u?void 0:h,className:W(y,"".concat(l.prefixCls,"-treenode"),(i={},K(K(K(K(K(K(K(K(K(K(i,"".concat(l.prefixCls,"-treenode-disabled"),A),"".concat(l.prefixCls,"-treenode-switcher-").concat(h?"open":"close"),!u),"".concat(l.prefixCls,"-treenode-checkbox-checked"),f),"".concat(l.prefixCls,"-treenode-checkbox-indeterminate"),p),"".concat(l.prefixCls,"-treenode-selected"),b),"".concat(l.prefixCls,"-treenode-loading"),x),"".concat(l.prefixCls,"-treenode-active"),E),"".concat(l.prefixCls,"-treenode-leaf-last"),Ke),"".concat(l.prefixCls,"-treenode-draggable"),U),"dragging",ce),K(K(K(K(K(K(K(i,"drop-target",l.dropTargetKey===s),"drop-container",l.dropContainerKey===s),"drag-over",!A&&d),"drag-over-gap-top",!A&&r),"drag-over-gap-bottom",!A&&c),"filter-node",(e=l.filterTreeNode)===null||e===void 0?void 0:e.call(l,H(t))),"".concat(l.prefixCls,"-treenode-leaf"),ee))),style:a,draggable:te,onDragStart:te?Ne:void 0,onDragEnter:U?Z:void 0,onDragOver:U?ke:void 0,onDragLeave:U?pe:void 0,onDrop:U?de:void 0,onDragEnd:U?J:void 0,onMouseMove:S},Xe,be),T.createElement(Qt,{prefixCls:l.prefixCls,level:we,isStart:v,isEnd:g}),Ee,De(),Be,Y)};Le.isTreeNode=1;function Q(n,t){if(!n)return[];var o=n.slice(),e=o.indexOf(t);return e>=0&&o.splice(e,1),o}function ne(n,t){var o=(n||[]).slice();return o.indexOf(t)===-1&&o.push(t),o}function Ve(n){return n.split("-")}function en(n,t){var o=[],e=q(t,n);function i(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];s.forEach(function(y){var a=y.key,d=y.children;o.push(a),i(d)})}return i(e.children),o}function tn(n){if(n.parent){var t=Ve(n.pos);return Number(t[t.length-1])===n.parent.children.length-1}return!1}function nn(n){var t=Ve(n.pos);return Number(t[t.length-1])===0}function Je(n,t,o,e,i,s,y,a,d,r){var c,u=n.clientX,v=n.clientY,g=n.target.getBoundingClientRect(),h=g.top,b=g.height,f=(r==="rtl"?-1:1)*(((i==null?void 0:i.x)||0)-u),p=(f-12)/e,x=d.filter(function(A){var F;return(F=a[A])===null||F===void 0||(F=F.children)===null||F===void 0?void 0:F.length}),m=q(a,o.eventKey);if(v<h+b/2){var E=y.findIndex(function(A){return A.key===m.key}),N=E<=0?0:E-1,S=y[N].key;m=q(a,S)}var D=m.key,$=m,l=m.key,O=0,M=0;if(!x.includes(D))for(var I=0;I<p&&tn(m);I+=1)m=m.parent,M+=1;var _=t.data,L=m.node,B=!0;return nn(m)&&m.level===0&&v<h+b/2&&s({dragNode:_,dropNode:L,dropPosition:-1})&&m.key===o.eventKey?O=-1:($.children||[]).length&&x.includes(l)?s({dragNode:_,dropNode:L,dropPosition:0})?O=0:B=!1:M===0?p>-1.5?s({dragNode:_,dropNode:L,dropPosition:1})?O=1:B=!1:s({dragNode:_,dropNode:L,dropPosition:0})?O=0:s({dragNode:_,dropNode:L,dropPosition:1})?O=1:B=!1:s({dragNode:_,dropNode:L,dropPosition:1})?O=1:B=!1,{dropPosition:O,dropLevelOffset:M,dropTargetKey:m.key,dropTargetPos:m.pos,dragOverNodeKey:l,dropContainerKey:O===0?null:((c=m.parent)===null||c===void 0?void 0:c.key)||null,dropAllowed:B}}function et(n,t){if(n){var o=t.multiple;return o?n.slice():n.length?[n[0]]:n}}function qe(n){if(!n)return null;var t;if(Array.isArray(n))t={checkedKeys:n,halfCheckedKeys:void 0};else if(ze(n)==="object")t={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return re(!1,"`checkedKeys` is not an array or an object"),null;return t}function tt(n,t){var o=new Set;function e(i){if(!o.has(i)){var s=q(t,i);if(s){o.add(i);var y=s.parent,a=s.node;a.disabled||y&&e(y.key)}}}return(n||[]).forEach(function(i){e(i)}),ue(o)}var an=function(t){var o=t.dropPosition,e=t.dropLevelOffset,i=t.indent,s={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(o){case-1:s.top=0,s.left=-e*i;break;case 1:s.bottom=0,s.left=-e*i;break;case 0:s.bottom=0,s.left=i;break}return T.createElement("div",{style:s})};function ct(n){if(n==null)throw new TypeError("Cannot destructure "+n)}function rn(n,t){var o=C.useState(!1),e=ae(o,2),i=e[0],s=e[1];Me(function(){if(i)return n(),function(){t()}},[i]),Me(function(){return s(!0),function(){s(!1)}},[])}var on=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],dn=C.forwardRef(function(n,t){var o=n.className,e=n.style,i=n.motion,s=n.motionNodes,y=n.motionType,a=n.onMotionStart,d=n.onMotionEnd,r=n.active,c=n.treeNodeRequiredProps,u=Ie(n,on),v=C.useState(!0),g=ae(v,2),h=g[0],b=g[1],f=C.useContext(Ge),p=f.prefixCls,x=s&&y!=="hide";Me(function(){s&&x!==h&&b(x)},[s]);var m=function(){s&&a()},E=C.useRef(!1),N=function(){s&&!E.current&&(E.current=!0,d())};rn(m,N);var S=function($){x===$&&N()};return s?C.createElement(ht,z({ref:t,visible:h},i,{motionAppear:y==="show",onVisibleChanged:S}),function(D,$){var l=D.className,O=D.style;return C.createElement("div",{ref:$,className:W("".concat(p,"-treenode-motion"),l),style:O},s.map(function(M){var I=Object.assign({},(ct(M.data),M.data)),_=M.title,L=M.key,B=M.isStart,A=M.isEnd;delete I.children;var F=$e(L,c);return C.createElement(Le,z({},I,F,{title:_,active:r,data:M.data,key:L,isStart:B,isEnd:A}))}))}):C.createElement(Le,z({domRef:t,className:o,style:e},u,{active:r}))});function ln(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=n.length,e=t.length;if(Math.abs(o-e)!==1)return{add:!1,key:null};function i(s,y){var a=new Map;s.forEach(function(r){a.set(r,!0)});var d=y.filter(function(r){return!a.has(r)});return d.length===1?d[0]:null}return o<e?{add:!0,key:i(n,t)}:{add:!1,key:i(t,n)}}function nt(n,t,o){var e=n.findIndex(function(a){return a.key===o}),i=n[e+1],s=t.findIndex(function(a){return a.key===o});if(i){var y=t.findIndex(function(a){return a.key===i.key});return t.slice(s+1,y)}return t.slice(s+1)}var sn=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],at={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},cn=function(){},fe="RC_TREE_MOTION_".concat(Math.random()),We={key:fe},ut={key:fe,level:0,index:0,pos:"0",node:We,nodes:[We]},rt={parent:null,children:[],pos:ut.pos,data:We,title:null,key:fe,isStart:[],isEnd:[]};function ot(n,t,o,e){return t===!1||!o?n:n.slice(0,Math.ceil(o/e)+1)}function it(n){var t=n.key,o=n.pos;return Oe(t,o)}function un(n){for(var t=String(n.data.key),o=n;o.parent;)o=o.parent,t="".concat(o.data.key," > ").concat(t);return t}var fn=C.forwardRef(function(n,t){var o=n.prefixCls,e=n.data;n.selectable,n.checkable;var i=n.expandedKeys,s=n.selectedKeys,y=n.checkedKeys,a=n.loadedKeys,d=n.loadingKeys,r=n.halfCheckedKeys,c=n.keyEntities,u=n.disabled,v=n.dragging,g=n.dragOverNodeKey,h=n.dropPosition,b=n.motion,f=n.height,p=n.itemHeight,x=n.virtual,m=n.scrollWidth,E=n.focusable,N=n.activeItem,S=n.focused,D=n.tabIndex,$=n.onKeyDown,l=n.onFocus,O=n.onBlur,M=n.onActiveChange,I=n.onListChangeStart,_=n.onListChangeEnd,L=Ie(n,sn),B=C.useRef(null),A=C.useRef(null);C.useImperativeHandle(t,function(){return{scrollTo:function(V){B.current.scrollTo(V)},getIndentWidth:function(){return A.current.offsetWidth}}});var F=C.useState(i),ve=ae(F,2),ge=ve[0],Ce=ve[1],he=C.useState(e),oe=ae(he,2),G=oe[0],ie=oe[1],ye=C.useState(e),U=ae(ye,2),Ne=U[0],Z=U[1],ke=C.useState([]),pe=ae(ke,2),J=pe[0],de=pe[1],_e=C.useState(null),me=ae(_e,2),ee=me[0],Ee=me[1],Se=C.useRef(e);Se.current=e;function De(){var R=Se.current;ie(R),Z(R),de([]),Ee(null),_()}Me(function(){Ce(i);var R=ln(ge,i);if(R.key!==null)if(R.add){var V=G.findIndex(function(te){var ce=te.key;return ce===R.key}),Y=ot(nt(G,e,R.key),x,f,p),be=G.slice();be.splice(V+1,0,rt),Z(be),de(Y),Ee("show")}else{var se=e.findIndex(function(te){var ce=te.key;return ce===R.key}),we=ot(nt(e,G,R.key),x,f,p),Ke=e.slice();Ke.splice(se+1,0,rt),Z(Ke),de(we),Ee("hide")}else G!==e&&(ie(e),Z(e))},[i,e]),C.useEffect(function(){v||De()},[v]);var Be=b?Ne:e,le={expandedKeys:i,selectedKeys:s,loadedKeys:a,loadingKeys:d,checkedKeys:y,halfCheckedKeys:r,dragOverNodeKey:g,dropPosition:h,keyEntities:c};return C.createElement(C.Fragment,null,S&&N&&C.createElement("span",{style:at,"aria-live":"assertive"},un(N)),C.createElement("div",null,C.createElement("input",{style:at,disabled:E===!1||u,tabIndex:E!==!1?D:null,onKeyDown:$,onFocus:l,onBlur:O,value:"",onChange:cn,"aria-label":"for screen reader"})),C.createElement("div",{className:"".concat(o,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},C.createElement("div",{className:"".concat(o,"-indent")},C.createElement("div",{ref:A,className:"".concat(o,"-indent-unit")}))),C.createElement(yt,z({},L,{data:Be,itemKey:it,height:f,fullHeight:!1,virtual:x,itemHeight:p,scrollWidth:m,prefixCls:"".concat(o,"-list"),ref:B,role:"tree",onVisibleChange:function(V){V.every(function(Y){return it(Y)!==fe})&&De()}}),function(R){var V=R.pos,Y=Object.assign({},(ct(R.data),R.data)),be=R.title,se=R.key,we=R.isStart,Ke=R.isEnd,te=Oe(se,V);delete Y.key,delete Y.children;var ce=$e(te,le);return C.createElement(dn,z({},Y,ce,{title:be,active:!!N&&se===N.key,pos:V,data:R.data,isStart:we,isEnd:Ke,motion:b,motionNodes:se===fe?J:null,motionType:ee,onMotionStart:I,onMotionEnd:De,treeNodeRequiredProps:le,onMouseMove:function(){M(null)}}))}))}),vn=10,ft=function(n){pt(o,n);var t=mt(o);function o(){var e;bt(this,o);for(var i=arguments.length,s=new Array(i),y=0;y<i;y++)s[y]=arguments[y];return e=t.call.apply(t,[this].concat(s)),K(w(e),"destroyed",!1),K(w(e),"delayedDragEnterLogic",void 0),K(w(e),"loadingRetryTimes",{}),K(w(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Re()}),K(w(e),"dragStartMousePosition",null),K(w(e),"dragNodeProps",null),K(w(e),"currentMouseOverDroppableNodeKey",null),K(w(e),"listRef",C.createRef()),K(w(e),"onNodeDragStart",function(a,d){var r=e.state,c=r.expandedKeys,u=r.keyEntities,v=e.props.onDragStart,g=d.eventKey;e.dragNodeProps=d,e.dragStartMousePosition={x:a.clientX,y:a.clientY};var h=Q(c,g);e.setState({draggingNodeKey:g,dragChildrenKeys:en(g,u),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(h),window.addEventListener("dragend",e.onWindowDragEnd),v==null||v({event:a,node:H(d)})}),K(w(e),"onNodeDragEnter",function(a,d){var r=e.state,c=r.expandedKeys,u=r.keyEntities,v=r.dragChildrenKeys,g=r.flattenNodes,h=r.indent,b=e.props,f=b.onDragEnter,p=b.onExpand,x=b.allowDrop,m=b.direction,E=d.pos,N=d.eventKey;if(e.currentMouseOverDroppableNodeKey!==N&&(e.currentMouseOverDroppableNodeKey=N),!e.dragNodeProps){e.resetDragState();return}var S=Je(a,e.dragNodeProps,d,h,e.dragStartMousePosition,x,g,u,c,m),D=S.dropPosition,$=S.dropLevelOffset,l=S.dropTargetKey,O=S.dropContainerKey,M=S.dropTargetPos,I=S.dropAllowed,_=S.dragOverNodeKey;if(v.includes(l)||!I){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(L){clearTimeout(e.delayedDragEnterLogic[L])}),e.dragNodeProps.eventKey!==d.eventKey&&(a.persist(),e.delayedDragEnterLogic[E]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var L=ue(c),B=q(u,d.eventKey);B&&(B.children||[]).length&&(L=ne(c,d.eventKey)),e.props.hasOwnProperty("expandedKeys")||e.setExpandedKeys(L),p==null||p(L,{node:H(d),expanded:!0,nativeEvent:a.nativeEvent})}},800)),e.dragNodeProps.eventKey===l&&$===0){e.resetDragState();return}e.setState({dragOverNodeKey:_,dropPosition:D,dropLevelOffset:$,dropTargetKey:l,dropContainerKey:O,dropTargetPos:M,dropAllowed:I}),f==null||f({event:a,node:H(d),expandedKeys:c})}),K(w(e),"onNodeDragOver",function(a,d){var r=e.state,c=r.dragChildrenKeys,u=r.flattenNodes,v=r.keyEntities,g=r.expandedKeys,h=r.indent,b=e.props,f=b.onDragOver,p=b.allowDrop,x=b.direction;if(e.dragNodeProps){var m=Je(a,e.dragNodeProps,d,h,e.dragStartMousePosition,p,u,v,g,x),E=m.dropPosition,N=m.dropLevelOffset,S=m.dropTargetKey,D=m.dropContainerKey,$=m.dropTargetPos,l=m.dropAllowed,O=m.dragOverNodeKey;c.includes(S)||!l||(e.dragNodeProps.eventKey===S&&N===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():E===e.state.dropPosition&&N===e.state.dropLevelOffset&&S===e.state.dropTargetKey&&D===e.state.dropContainerKey&&$===e.state.dropTargetPos&&l===e.state.dropAllowed&&O===e.state.dragOverNodeKey||e.setState({dropPosition:E,dropLevelOffset:N,dropTargetKey:S,dropContainerKey:D,dropTargetPos:$,dropAllowed:l,dragOverNodeKey:O}),f==null||f({event:a,node:H(d)}))}}),K(w(e),"onNodeDragLeave",function(a,d){e.currentMouseOverDroppableNodeKey===d.eventKey&&!a.currentTarget.contains(a.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var r=e.props.onDragLeave;r==null||r({event:a,node:H(d)})}),K(w(e),"onWindowDragEnd",function(a){e.onNodeDragEnd(a,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)}),K(w(e),"onNodeDragEnd",function(a,d){var r=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),r==null||r({event:a,node:H(d)}),e.dragNodeProps=null,window.removeEventListener("dragend",e.onWindowDragEnd)}),K(w(e),"onNodeDrop",function(a,d){var r,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=e.state,v=u.dragChildrenKeys,g=u.dropPosition,h=u.dropTargetKey,b=u.dropTargetPos,f=u.dropAllowed;if(f){var p=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),h!==null){var x=j(j({},$e(h,e.getTreeNodeRequiredProps())),{},{active:((r=e.getActiveItem())===null||r===void 0?void 0:r.key)===h,data:q(e.state.keyEntities,h).node}),m=v.includes(h);re(!m,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var E=Ve(b),N={event:a,node:H(x),dragNode:e.dragNodeProps?H(e.dragNodeProps):null,dragNodesKeys:[e.dragNodeProps.eventKey].concat(v),dropToGap:g!==0,dropPosition:g+Number(E[E.length-1])};c||p==null||p(N),e.dragNodeProps=null}}}),K(w(e),"cleanDragState",function(){var a=e.state.draggingNodeKey;a!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null}),K(w(e),"triggerExpandActionExpand",function(a,d){var r=e.state,c=r.expandedKeys,u=r.flattenNodes,v=d.expanded,g=d.key,h=d.isLeaf;if(!(h||a.shiftKey||a.metaKey||a.ctrlKey)){var b=u.filter(function(p){return p.key===g})[0],f=H(j(j({},$e(g,e.getTreeNodeRequiredProps())),{},{data:b.data}));e.setExpandedKeys(v?Q(c,g):ne(c,g)),e.onNodeExpand(a,f)}}),K(w(e),"onNodeClick",function(a,d){var r=e.props,c=r.onClick,u=r.expandAction;u==="click"&&e.triggerExpandActionExpand(a,d),c==null||c(a,d)}),K(w(e),"onNodeDoubleClick",function(a,d){var r=e.props,c=r.onDoubleClick,u=r.expandAction;u==="doubleClick"&&e.triggerExpandActionExpand(a,d),c==null||c(a,d)}),K(w(e),"onNodeSelect",function(a,d){var r=e.state.selectedKeys,c=e.state,u=c.keyEntities,v=c.fieldNames,g=e.props,h=g.onSelect,b=g.multiple,f=d.selected,p=d[v.key],x=!f;x?b?r=ne(r,p):r=[p]:r=Q(r,p);var m=r.map(function(E){var N=q(u,E);return N?N.node:null}).filter(Boolean);e.setUncontrolledState({selectedKeys:r}),h==null||h(r,{event:"select",selected:x,node:d,selectedNodes:m,nativeEvent:a.nativeEvent})}),K(w(e),"onNodeCheck",function(a,d,r){var c=e.state,u=c.keyEntities,v=c.checkedKeys,g=c.halfCheckedKeys,h=e.props,b=h.checkStrictly,f=h.onCheck,p=d.key,x,m={event:"check",node:d,checked:r,nativeEvent:a.nativeEvent};if(b){var E=r?ne(v,p):Q(v,p),N=Q(g,p);x={checked:E,halfChecked:N},m.checkedNodes=E.map(function(M){return q(u,M)}).filter(Boolean).map(function(M){return M.node}),e.setUncontrolledState({checkedKeys:E})}else{var S=je([].concat(ue(v),[p]),!0,u),D=S.checkedKeys,$=S.halfCheckedKeys;if(!r){var l=new Set(D);l.delete(p);var O=je(Array.from(l),{halfCheckedKeys:$},u);D=O.checkedKeys,$=O.halfCheckedKeys}x=D,m.checkedNodes=[],m.checkedNodesPositions=[],m.halfCheckedKeys=$,D.forEach(function(M){var I=q(u,M);if(I){var _=I.node,L=I.pos;m.checkedNodes.push(_),m.checkedNodesPositions.push({node:_,pos:L})}}),e.setUncontrolledState({checkedKeys:D},!1,{halfCheckedKeys:$})}f==null||f(x,m)}),K(w(e),"onNodeLoad",function(a){var d,r=a.key,c=e.state.keyEntities,u=q(c,r);if(!(u!=null&&(d=u.children)!==null&&d!==void 0&&d.length)){var v=new Promise(function(g,h){e.setState(function(b){var f=b.loadedKeys,p=f===void 0?[]:f,x=b.loadingKeys,m=x===void 0?[]:x,E=e.props,N=E.loadData,S=E.onLoad;if(!N||p.includes(r)||m.includes(r))return null;var D=N(a);return D.then(function(){var $=e.state.loadedKeys,l=ne($,r);S==null||S(l,{event:"load",node:a}),e.setUncontrolledState({loadedKeys:l}),e.setState(function(O){return{loadingKeys:Q(O.loadingKeys,r)}}),g()}).catch(function($){if(e.setState(function(O){return{loadingKeys:Q(O.loadingKeys,r)}}),e.loadingRetryTimes[r]=(e.loadingRetryTimes[r]||0)+1,e.loadingRetryTimes[r]>=vn){var l=e.state.loadedKeys;re(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:ne(l,r)}),g()}h($)}),{loadingKeys:ne(m,r)}})});return v.catch(function(){}),v}}),K(w(e),"onNodeMouseEnter",function(a,d){var r=e.props.onMouseEnter;r==null||r({event:a,node:d})}),K(w(e),"onNodeMouseLeave",function(a,d){var r=e.props.onMouseLeave;r==null||r({event:a,node:d})}),K(w(e),"onNodeContextMenu",function(a,d){var r=e.props.onRightClick;r&&(a.preventDefault(),r({event:a,node:d}))}),K(w(e),"onFocus",function(){var a=e.props.onFocus;e.setState({focused:!0});for(var d=arguments.length,r=new Array(d),c=0;c<d;c++)r[c]=arguments[c];a==null||a.apply(void 0,r)}),K(w(e),"onBlur",function(){var a=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var d=arguments.length,r=new Array(d),c=0;c<d;c++)r[c]=arguments[c];a==null||a.apply(void 0,r)}),K(w(e),"getTreeNodeRequiredProps",function(){var a=e.state,d=a.expandedKeys,r=a.selectedKeys,c=a.loadedKeys,u=a.loadingKeys,v=a.checkedKeys,g=a.halfCheckedKeys,h=a.dragOverNodeKey,b=a.dropPosition,f=a.keyEntities;return{expandedKeys:d||[],selectedKeys:r||[],loadedKeys:c||[],loadingKeys:u||[],checkedKeys:v||[],halfCheckedKeys:g||[],dragOverNodeKey:h,dropPosition:b,keyEntities:f}}),K(w(e),"setExpandedKeys",function(a){var d=e.state,r=d.treeData,c=d.fieldNames,u=Fe(r,a,c);e.setUncontrolledState({expandedKeys:a,flattenNodes:u},!0)}),K(w(e),"onNodeExpand",function(a,d){var r=e.state.expandedKeys,c=e.state,u=c.listChanging,v=c.fieldNames,g=e.props,h=g.onExpand,b=g.loadData,f=d.expanded,p=d[v.key];if(!u){var x=r.includes(p),m=!f;if(re(f&&x||!f&&!x,"Expand state not sync with index check"),r=m?ne(r,p):Q(r,p),e.setExpandedKeys(r),h==null||h(r,{node:d,expanded:m,nativeEvent:a.nativeEvent}),m&&b){var E=e.onNodeLoad(d);E&&E.then(function(){var N=Fe(e.state.treeData,r,v);e.setUncontrolledState({flattenNodes:N})}).catch(function(){var N=e.state.expandedKeys,S=Q(N,p);e.setExpandedKeys(S)})}}}),K(w(e),"onListChangeStart",function(){e.setUncontrolledState({listChanging:!0})}),K(w(e),"onListChangeEnd",function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})}),K(w(e),"onActiveChange",function(a){var d=e.state.activeKey,r=e.props,c=r.onActiveChange,u=r.itemScrollOffset,v=u===void 0?0:u;d!==a&&(e.setState({activeKey:a}),a!==null&&e.scrollTo({key:a,offset:v}),c==null||c(a))}),K(w(e),"getActiveItem",function(){var a=e.state,d=a.activeKey,r=a.flattenNodes;return d===null?null:r.find(function(c){var u=c.key;return u===d})||null}),K(w(e),"offsetActiveKey",function(a){var d=e.state,r=d.flattenNodes,c=d.activeKey,u=r.findIndex(function(h){var b=h.key;return b===c});u===-1&&a<0&&(u=r.length),u=(u+a+r.length)%r.length;var v=r[u];if(v){var g=v.key;e.onActiveChange(g)}else e.onActiveChange(null)}),K(w(e),"onKeyDown",function(a){var d=e.state,r=d.activeKey,c=d.expandedKeys,u=d.checkedKeys,v=d.fieldNames,g=e.props,h=g.onKeyDown,b=g.checkable,f=g.selectable;switch(a.which){case xe.UP:{e.offsetActiveKey(-1),a.preventDefault();break}case xe.DOWN:{e.offsetActiveKey(1),a.preventDefault();break}}var p=e.getActiveItem();if(p&&p.data){var x=e.getTreeNodeRequiredProps(),m=p.data.isLeaf===!1||!!(p.data[v.children]||[]).length,E=H(j(j({},$e(r,x)),{},{data:p.data,active:!0}));switch(a.which){case xe.LEFT:{m&&c.includes(r)?e.onNodeExpand({},E):p.parent&&e.onActiveChange(p.parent.key),a.preventDefault();break}case xe.RIGHT:{m&&!c.includes(r)?e.onNodeExpand({},E):p.children&&p.children.length&&e.onActiveChange(p.children[0].key),a.preventDefault();break}case xe.ENTER:case xe.SPACE:{b&&!E.disabled&&E.checkable!==!1&&!E.disableCheckbox?e.onNodeCheck({},E,!u.includes(r)):!b&&f&&!E.disabled&&E.selectable!==!1&&e.onNodeSelect({},E);break}}}h==null||h(a)}),K(w(e),"setUncontrolledState",function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var c=!1,u=!0,v={};Object.keys(a).forEach(function(g){if(e.props.hasOwnProperty(g)){u=!1;return}c=!0,v[g]=a[g]}),c&&(!d||u)&&e.setState(j(j({},v),r))}}),K(w(e),"scrollTo",function(a){e.listRef.current.scrollTo(a)}),e}return Kt(o,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var i=this.props,s=i.activeKey,y=i.itemScrollOffset,a=y===void 0?0:y;s!==void 0&&s!==this.state.activeKey&&(this.setState({activeKey:s}),s!==null&&this.scrollTo({key:s,offset:a}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var i=this.state,s=i.focused,y=i.flattenNodes,a=i.keyEntities,d=i.draggingNodeKey,r=i.activeKey,c=i.dropLevelOffset,u=i.dropContainerKey,v=i.dropTargetKey,g=i.dropPosition,h=i.dragOverNodeKey,b=i.indent,f=this.props,p=f.prefixCls,x=f.className,m=f.style,E=f.showLine,N=f.focusable,S=f.tabIndex,D=S===void 0?0:S,$=f.selectable,l=f.showIcon,O=f.icon,M=f.switcherIcon,I=f.draggable,_=f.checkable,L=f.checkStrictly,B=f.disabled,A=f.motion,F=f.loadData,ve=f.filterTreeNode,ge=f.height,Ce=f.itemHeight,he=f.scrollWidth,oe=f.virtual,G=f.titleRender,ie=f.dropIndicatorRender,ye=f.onContextMenu,U=f.onScroll,Ne=f.direction,Z=f.rootClassName,ke=f.rootStyle,pe=dt(this.props,{aria:!0,data:!0}),J;I&&(ze(I)==="object"?J=I:typeof I=="function"?J={nodeDraggable:I}:J={});var de={prefixCls:p,selectable:$,showIcon:l,icon:O,switcherIcon:M,draggable:J,draggingNodeKey:d,checkable:_,checkStrictly:L,disabled:B,keyEntities:a,dropLevelOffset:c,dropContainerKey:u,dropTargetKey:v,dropPosition:g,dragOverNodeKey:h,indent:b,direction:Ne,dropIndicatorRender:ie,loadData:F,filterTreeNode:ve,titleRender:G,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return C.createElement(Ge.Provider,{value:de},C.createElement("div",{className:W(p,x,Z,K(K(K({},"".concat(p,"-show-line"),E),"".concat(p,"-focused"),s),"".concat(p,"-active-focused"),r!==null)),style:ke},C.createElement(fn,z({ref:this.listRef,prefixCls:p,style:m,data:y,disabled:B,selectable:$,checkable:!!_,motion:A,dragging:d!==null,height:ge,itemHeight:Ce,virtual:oe,focusable:N,focused:s,tabIndex:D,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:ye,onScroll:U,scrollWidth:he},this.getTreeNodeRequiredProps(),pe))))}}],[{key:"getDerivedStateFromProps",value:function(i,s){var y=s.prevProps,a={prevProps:i};function d(D){return!y&&i.hasOwnProperty(D)||y&&y[D]!==i[D]}var r,c=s.fieldNames;if(d("fieldNames")&&(c=Re(i.fieldNames),a.fieldNames=c),d("treeData")?r=i.treeData:d("children")&&(re(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),r=Pt(i.children)),r){a.treeData=r;var u=Mt(r,{fieldNames:c});a.keyEntities=j(K({},fe,ut),u.keyEntities)}var v=a.keyEntities||s.keyEntities;if(d("expandedKeys")||y&&d("autoExpandParent"))a.expandedKeys=i.autoExpandParent||!y&&i.defaultExpandParent?tt(i.expandedKeys,v):i.expandedKeys;else if(!y&&i.defaultExpandAll){var g=j({},v);delete g[fe];var h=[];Object.keys(g).forEach(function(D){var $=g[D];$.children&&$.children.length&&h.push($.key)}),a.expandedKeys=h}else!y&&i.defaultExpandedKeys&&(a.expandedKeys=i.autoExpandParent||i.defaultExpandParent?tt(i.defaultExpandedKeys,v):i.defaultExpandedKeys);if(a.expandedKeys||delete a.expandedKeys,r||a.expandedKeys){var b=Fe(r||s.treeData,a.expandedKeys||s.expandedKeys,c);a.flattenNodes=b}if(i.selectable&&(d("selectedKeys")?a.selectedKeys=et(i.selectedKeys,i):!y&&i.defaultSelectedKeys&&(a.selectedKeys=et(i.defaultSelectedKeys,i))),i.checkable){var f;if(d("checkedKeys")?f=qe(i.checkedKeys)||{}:!y&&i.defaultCheckedKeys?f=qe(i.defaultCheckedKeys)||{}:r&&(f=qe(i.checkedKeys)||{checkedKeys:s.checkedKeys,halfCheckedKeys:s.halfCheckedKeys}),f){var p=f,x=p.checkedKeys,m=x===void 0?[]:x,E=p.halfCheckedKeys,N=E===void 0?[]:E;if(!i.checkStrictly){var S=je(m,!0,v);m=S.checkedKeys,N=S.halfCheckedKeys}a.checkedKeys=m,a.halfCheckedKeys=N}}return d("loadedKeys")&&(a.loadedKeys=i.loadedKeys),a}}]),o}(C.Component);K(ft,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:an,allowDrop:function(){return!0},expandAction:!1});K(ft,"TreeNode",Le);const gn=n=>{let{treeCls:t,treeNodeCls:o,directoryNodeSelectedBg:e,directoryNodeSelectedColor:i,motionDurationMid:s,borderRadius:y,controlItemBgHover:a}=n;return{[`${t}${t}-directory ${o}`]:{[`${t}-node-content-wrapper`]:{position:"static",[`> *:not(${t}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${s}`,content:'""',borderRadius:y},"&:hover:before":{background:a}},[`${t}-switcher, ${t}-checkbox, ${t}-draggable-icon`]:{zIndex:1},"&-selected":{[`${t}-switcher, ${t}-draggable-icon`]:{color:i},[`${t}-node-content-wrapper`]:{color:i,background:"transparent","&:before, &:hover:before":{background:e}}}}}},hn=new Nt("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),yn=(n,t)=>({[`.${n}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),pn=(n,t)=>({[`.${n}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${Ue(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),mn=(n,t)=>{const{treeCls:o,treeNodeCls:e,treeNodePadding:i,titleHeight:s,indentSize:y,nodeSelectedBg:a,nodeHoverBg:d,colorTextQuaternary:r,controlItemBgActiveDisabled:c}=t;return{[o]:Object.assign(Object.assign({},Ct(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${o}-rtl ${o}-switcher_close ${o}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${o}-active-focused)`]:Object.assign({},kt(t)),[`${o}-list-holder-inner`]:{alignItems:"flex-start"},[`&${o}-block-node`]:{[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-node-content-wrapper`]:{flex:"auto"},[`${e}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:hn,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:t.borderRadius}}},[e]:{display:"flex",alignItems:"flex-start",marginBottom:i,lineHeight:Ue(s),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:i},[`&-disabled ${o}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${o}-checkbox-disabled + ${o}-node-selected,&${e}-disabled${e}-selected ${o}-node-content-wrapper`]:{backgroundColor:c},[`${o}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${e}-disabled)`]:{[`${o}-node-content-wrapper`]:{"&:hover":{color:t.nodeHoverColor}}},[`&-active ${o}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${e}-disabled).filter-node ${o}-title`]:{color:t.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${o}-draggable-icon`]:{flexShrink:0,width:s,textAlign:"center",visibility:"visible",color:r},[`&${e}-disabled ${o}-draggable-icon`]:{visibility:"hidden"}}},[`${o}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:y}},[`${o}-draggable-icon`]:{visibility:"hidden"},[`${o}-switcher, ${o}-checkbox`]:{marginInlineEnd:t.calc(t.calc(s).sub(t.controlInteractiveSize)).div(2).equal()},[`${o}-switcher`]:Object.assign(Object.assign({},yn(n,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:s,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:s,height:s,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${o}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},[`&_close ${o}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(s).div(2).equal(),bottom:t.calc(i).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(s).div(2).equal()).mul(.8).equal(),height:t.calc(s).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${o}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:s,paddingBlock:0,paddingInline:t.paddingXS,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},pn(n,t)),{"&:hover":{backgroundColor:d},[`&${o}-node-selected`]:{color:t.nodeSelectedColor,backgroundColor:a},[`${o}-iconEle`]:{display:"inline-block",width:s,height:s,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${o}-unselectable ${o}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${e}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${t.colorPrimary}`},"&-show-line":{[`${o}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(s).div(2).equal(),bottom:t.calc(i).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${o}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${e}-leaf-last ${o}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${Ue(t.calc(s).div(2).equal())} !important`}})}},bn=function(n,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const e=`.${n}`,i=`${e}-treenode`,s=t.calc(t.paddingXS).div(2).equal(),y=xt(t,{treeCls:e,treeNodeCls:i,treeNodePadding:s});return[mn(n,y),o&&gn(y)].filter(Boolean)},Kn=n=>{const{controlHeightSM:t,controlItemBgHover:o,controlItemBgActive:e}=n,i=t;return{titleHeight:i,indentSize:i,nodeHoverBg:o,nodeHoverColor:n.colorText,nodeSelectedBg:e,nodeSelectedColor:n.colorText}},xn=n=>{const{colorTextLightSolid:t,colorPrimary:o}=n;return Object.assign(Object.assign({},Kn(n)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:o})},kn=Et("Tree",(n,t)=>{let{prefixCls:o}=t;return[{[n.componentCls]:wt(`${o}-checkbox`,n)},bn(o,n),St(n)]},xn),En=n=>{const{prefixCls:t,switcherIcon:o,treeNodeProps:e,showLine:i,switcherLoadingIcon:s}=n,{isLeaf:y,expanded:a,loading:d}=e;if(d)return C.isValidElement(s)?s:C.createElement(Dt,{className:`${t}-switcher-loading-icon`});let r;if(i&&typeof i=="object"&&(r=i.showLeafIcon),y){if(!i)return null;if(typeof r!="boolean"&&r){const v=typeof r=="function"?r(e):r,g=`${t}-switcher-line-custom-icon`;return C.isValidElement(v)?Ye(v,{className:W(v.props.className||"",g)}):v}return r?C.createElement(jt,{className:`${t}-switcher-line-icon`}):C.createElement("span",{className:`${t}-switcher-leaf-line`})}const c=`${t}-switcher-icon`,u=typeof o=="function"?o(e):o;return C.isValidElement(u)?Ye(u,{className:W(u.props.className||"",c)}):u!==void 0?u:i?a?C.createElement(Wt,{className:`${t}-switcher-line-icon`}):C.createElement(Vt,{className:`${t}-switcher-line-icon`}):C.createElement(Bt,{className:c})};export{jt as R,En as S,ft as T,Xt as U,je as a,Q as b,Mt as c,ne as d,tt as e,Re as f,bn as g,Pt as h,Kn as i,Le as j,kn as u};
